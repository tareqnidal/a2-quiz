(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function r(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(t){if(t.ep)return;t.ep=!0;const o=r(t);fetch(t.href,o)}})();function T(){const m=JSON.parse(localStorage.getItem("highScores"))||[];m.sort((s,t)=>s.time-t.time);const c=document.getElementById("highscore"),r=document.createElement("table");r.innerHTML=`
        <thead>
            <tr>
                <th>Rank</th>
                <th>Nickname</th>
                <th>Time Taken (s)</th>
            </tr>
        </thead>
        <tbody>
            ${m.slice(0,5).map((s,t)=>`
                <tr>
                    <td>${t+1}</td>
                    <td>${s.nickname}</td>
                    <td>${s.time}</td>
                </tr>
            `).join("")}
        </tbody>
    `,c.innerHTML="",c.appendChild(r)}function C(m,c){const r=JSON.parse(localStorage.getItem("highScores"))||[],t=Math.floor((new Date-m)/1e3),o=r.find(a=>a.nickname===c);o?t<o.time&&(o.time=t):r.push({nickname:c,time:t}),localStorage.setItem("highScores",JSON.stringify(r))}document.addEventListener("DOMContentLoaded",()=>{document.getElementById("start-btn").addEventListener("click",p),document.getElementById("restartGameButton").addEventListener("click",I),document.getElementById("highScoreLink").addEventListener("click",T),document.getElementById("username").addEventListener("keypress",function(e){e.key==="Enter"&&(e.preventDefault(),p())});let r,s,t,o,a;function b(){s=document.getElementById("username").value,s||alert("Please enter a nickname to start the game.")}function p(){b(),t=Date.now(),r=0,document.getElementById("startContainer").style.display="none",document.getElementById("Quiz").style.display="block",document.getElementById("timer").style.display="block",k()}function k(){fetch(`https://courselab.lnu.se/quiz/question/${r+1}`).then(e=>e.json()).then(e=>E(e))}function E(e){r=e.id,document.getElementById("question").innerHTML=`<h2>${e.question}</h2>`,L();const n=document.getElementById("optionsContainer");if(n.innerHTML="",e.alternatives){Object.entries(e.alternatives).forEach(([d,l])=>{const g=document.createElement("label"),u=document.createElement("input");u.setAttribute("type","radio"),u.setAttribute("name","answer"),u.setAttribute("value",d),u.addEventListener("keypress",function(B){B.key==="Enter"&&(B.preventDefault(),y())}),g.appendChild(u),g.appendChild(document.createTextNode(l)),n.appendChild(g)});const i=document.createElement("button");i.textContent="Submit Answer",i.className="btn",i.addEventListener("click",y),n.appendChild(i)}else{n.innerHTML=`
            <label for="textAnswer">Press enter or Submit to submit your answer:</label>
            <input type="text" id="textAnswer" placeholder="Your answer">
            <button class="btn" id="submit-answer">Submit</button>
        `,document.getElementById("textAnswer").addEventListener("keypress",function(l){l.key==="Enter"&&y()});const d=document.getElementById("submit-answer");d.removeEventListener("click",y),d.addEventListener("click",y)}}function y(e=null){let n;const i=document.getElementsByName("answer");for(const l of i)if(l.checked){e=l.value;break}const d=document.getElementById("textAnswer");if(d)n=d.value.trim();else if(e!==null)n=e;else{f();return}clearInterval(a),v(r,n).then(l=>w(l)).catch(l=>{l.message==="Incorrect answer"?(document.getElementById("quizTitle").textContent=l.message,document.getElementById("timeTaken").style.display="none",clearInterval(a),h("Wrong answer <ðŸ˜”> game over.")):console.error("Error submitting answer:",l)})}function w(e){e.message&&(document.getElementById("quizTitle").textContent=e.message),r=0,e.nextURL?fetch(e.nextURL).then(n=>n.json()).then(n=>E(n)):(h("Congrats, You win! Good work."),f(e))}async function v(e,n){const i=await fetch(`https://courselab.lnu.se/quiz/answer/${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({answer:n})});if(!i.ok&&i.status===400)throw new Error("Incorrect answer");return await i.json()}function f(e){const n=document.getElementById("timeTaken"),i=document.getElementById("highScoreLink");document.getElementById("Quiz").style.display="none";const d=document.getElementById("resultContainer");d.style.display="block",o=Date.now();const g=((o-t)%6e4/1e3).toFixed(0);e&&C(t,s),document.getElementById("restartGameButton").addEventListener("click",I),document.getElementById("timer").style.display="none",document.getElementById("restartGameButton").style.display="block",n.textContent=`${s} Time taken:  ${g} seconds`,i.style.display="block"}function I(){r=0,document.getElementById("resultContainer").style.display="none",document.getElementById("startContainer").style.display="block",document.getElementById("timer").style.display="none",document.getElementById("restartGameButton").style.display="none",document.getElementById("highScoreLink").style.display="none",document.getElementById("quizTitle").textContent="The Quiz",document.getElementById("username").value=""}function L(){clearInterval(a),S()}function S(){let e=10;const n=document.getElementById("time");n.textContent=e,n.style.color="green",a=setInterval(()=>{if(document.getElementById("time").textContent=Math.floor(e),e=(e-.1).toFixed(1),e<=0){clearInterval(a),h("Time's up <br> Game Over"),document.getElementById("timeTaken").style.display="none";return}n.textContent=e,e<4?n.style.color="red":e<7&&(n.style.color="orange"),e-=.1},195)}function h(e){clearInterval(a),document.getElementById("quizTitle").textContent="The Quiz",document.getElementById("timer").style.display="none",document.getElementById("resultMessage").textContent=e,f()}});
